# üé¨ Movie Bot

Telegram –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–ø–∏—Å–∫–æ–º —Ñ—ñ–ª—å–º—ñ–≤

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. –ö–ª–æ–Ω—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
```bash
git clone https://github.com/YOUR_USERNAME/movie-bot.git
cd movie-bot
```

2. –°—Ç–≤–æ—Ä–∏ `.env` —Ñ–∞–π–ª:
```bash
BOT_TOKEN=your_telegram_bot_token_here
DATABASE_PATH=movies.db
```

3. –í—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```bash
go mod download
```

4. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞:
```bash
go run main.go
```

## üì¶ –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞

- `/start` - –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
- `/help` - –ü–æ–∫–∞–∑–∞—Ç–∏ –¥–æ–≤—ñ–¥–∫—É
- `/random` - –û—Ç—Ä–∏–º–∞—Ç–∏ –≤–∏–ø–∞–¥–∫–æ–≤–∏–π —Ñ—ñ–ª—å–º –∑—ñ —Å–ø–∏—Å–∫—É
- `/list` - –ü–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ —Ñ—ñ–ª—å–º–∏
- `/remove [–Ω–∞–∑–≤–∞]` - –í–∏–¥–∞–ª–∏—Ç–∏ —Ñ—ñ–ª—å–º –∑—ñ —Å–ø–∏—Å–∫—É
- –ü—Ä–æ—Å—Ç–æ –Ω–∞–¥—ñ—à–ª–∏ –Ω–∞–∑–≤—É —Ñ—ñ–ª—å–º—É –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
```
movie-bot/
‚îú‚îÄ‚îÄ main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
‚îú‚îÄ‚îÄ consumer/            # –û—Å–Ω–æ–≤–Ω–∏–π —Ü–∏–∫–ª –æ–±—Ä–æ–±–∫–∏ –ø–æ–¥—ñ–π
‚îú‚îÄ‚îÄ telegram/            # –†–æ–±–æ—Ç–∞ –∑ Telegram API
‚îÇ   ‚îú‚îÄ‚îÄ client.go       # HTTP –∫–ª—ñ—î–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ types.go        # –°—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îî‚îÄ‚îÄ processor.go    # –û–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥
‚îî‚îÄ‚îÄ storage/             # –†–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
    ‚îú‚îÄ‚îÄ storage.go      # –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    ‚îî‚îÄ‚îÄ sqlite/
        ‚îî‚îÄ‚îÄ sqlite.go   # SQLite —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
```

## üõ†Ô∏è –†–æ–∑—Ä–æ–±–∫–∞

### –ì—ñ–ª–∫–∏

- `main` - —Å—Ç–∞–±—ñ–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è –¥–ª—è production
- `dev` - –∞–∫—Ç–∏–≤–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞ –Ω–æ–≤–∏—Ö —Ñ—ñ—á–µ–π









–ö–†–û–ö 1 - –†–æ–∑—É–º–æ–≤—ñ –ø–∏—Ç–∞–Ω–Ω—è:

1. –ú—ñ–π –±–æ—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–≤–µ—Ä—Ç–∞—Ç–∏—Å—å –¥–æ –ê–ü–Ü —Ç–µ–ª–µ–≥—Ä–∞–º–∞, –∫–æ–∂–Ω—É —Å–µ–∫—É–Ω–¥—É —ñ –ø–∏—Ç–∞—Ç–∏ —á–∏ —î –Ω–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (getUpdates)

2. –¶–µ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –ø–æ—Å—Ç—ñ–π–Ω–∏–º, —Ç–æ–±—Ç–æ, –ø–æ–≤–∏–Ω–µ–Ω –∫—Ä—É—Ç–∏—Ç–∏—Å—å —Ü–∏–∫–ª:

–ø–æ–≤—Ç–æ—Ä:
    –∑–∞–ø–∏—Ç–∞—Ç–∏ "—î –Ω–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è?"
    —è–∫—â–æ —î - –æ–±—Ä–æ–±–∏—Ç–∏
    –ø–æ—á–µ–∫–∞—Ç–∏ 1 —Å–µ–∫—É–Ω–¥—É
    –π—Ç–∏ –Ω–∞ –ø–æ–≤—Ç–æ—Ä

3. –ü–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–∑–ø–∞—Ä—Å–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ —Ç–µ–ª–µ–≥—Ä–∞–º–∞, —ñ –≤–∑—è—Ç–∏ –∑ –Ω–µ—ó –Ü–î —á–∞—Ç—É —Ç–∞ —Ç–µ–∫—Å—Ç, —â–æ –≤—ñ–¥–ø—Ä–∞–≤–∏–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á

4. –ó—Ä–æ–±–∏—Ç–∏ —è–∫—ñ—Å—å –æ–ø–µ—Ä–∞—Ü—ñ—ó (–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ñ—ñ–ª—å–º—É –≤ –ë–î/ –¥—ñ—Å—Ç–∞–≤–∞–Ω–Ω—è –∑ –ë–î + –≤–∏–¥–∞–ª–µ–Ω–Ω—è)

5. –í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –∫–æ—Ä–∏—Å—Ç–æ–≤–∞—á—É - –∑–∞–ø–∏—Ç –¥–æ —ñ–Ω—à–æ–≥–æ API Telegram: `sendMessage`
- ID —á–∞—Ç—É (—â–æ–± –∑–Ω–∞—Ç–∏ –ö–û–ú–£ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏)
- –¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

–ö–†–û–ö 2 - –õ–æ–≥—ñ–∫–∞: 

–ì–û–õ–û–í–ù–ò–ô –¶–ò–ö–õ:
    –ø–æ–≤—Ç–æ—Ä –∑–∞–≤–∂–¥–∏:
        1. –ó–∞–ø–∏—Ç–∞—Ç–∏ Telegram: "–¥–∞–π –Ω–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"
        2. –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:
            - –ü–æ–¥–∏–≤–∏—Ç–∏—Å—å —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–ø–∏—Å–∞–≤
            - –Ø–∫—â–æ "/start" ‚Üí –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ "–ü—Ä–∏–≤—ñ—Ç"
            - –Ø–∫—â–æ "/random" ‚Üí –¥–∞—Ç–∏ –≤–∏–ø–∞–¥–∫–æ–≤–∏–π —Ñ—ñ–ª—å–º
            - –Ø–∫—â–æ "/help" ‚Üí –ø–æ–∫–∞–∑–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∏
            - –Ü–Ω–∞–∫—à–µ ‚Üí –∑–±–µ—Ä–µ–≥—Ç–∏ —è–∫ –Ω–∞–∑–≤—É —Ñ—ñ–ª—å–º—É
        3. –ü–æ—á–µ–∫–∞—Ç–∏ 1 —Å–µ–∫—É–Ω–¥—É


movie-bot/
‚îú‚îÄ‚îÄ main.go                    ‚Üê —Ç–æ—á–∫–∞ –≤—Ö–æ–¥—É (—Å—Ç–≤–æ—Ä—é—î –≤—Å–µ, –∑–∞–ø—É—Å–∫–∞—î)
‚îú‚îÄ‚îÄ go.mod                     ‚Üê –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îÇ
‚îú‚îÄ‚îÄ telegram/                  ‚Üê –≤—Å–µ –ø—Ä–æ Telegram
‚îÇ   ‚îú‚îÄ‚îÄ client.go             ‚Üê HTTP –∑–∞–ø–∏—Ç–∏ (GetUpdates, SendMessage)
‚îÇ   ‚îú‚îÄ‚îÄ types.go              ‚Üê —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ (Response, Update, Message)
‚îÇ   ‚îî‚îÄ‚îÄ processor.go          ‚Üê –æ–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥ (Process)
‚îÇ
‚îú‚îÄ‚îÄ storage/                   ‚Üê –≤—Å–µ –ø—Ä–æ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ storage.go            ‚Üê —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å Storage
‚îÇ   ‚îî‚îÄ‚îÄ sqlite/
‚îÇ       ‚îî‚îÄ‚îÄ sqlite.go         ‚Üê —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è SQLite
‚îÇ
‚îî‚îÄ‚îÄ consumer/
    ‚îî‚îÄ‚îÄ consumer.go           ‚Üê –≥–æ–ª–æ–≤–Ω–∏–π —Ü–∏–∫–ª (EventConsumer)

    1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–∏—à–µ "–Ü–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä"
         ‚Üì
2. Telegram –∑–±–µ—Ä—ñ–≥–∞—î —Ü–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
         ‚Üì
3. EventConsumer –∑–∞–ø–∏—Ç—É—î: "–î–∞–π updates"
         ‚Üì
4. TelegramClient —Ä–æ–±–∏—Ç—å HTTP –∑–∞–ø–∏—Ç
         ‚Üì
5. Telegram –ø–æ–≤–µ—Ä—Ç–∞—î JSON:
   {"result": [{"update_id": 123, "message": {"text": "–Ü–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä", "chat": {"id": 456}}}]}
         ‚Üì
6. TelegramClient –ø–∞—Ä—Å–∏—Ç—å JSON ‚Üí Update struct
   Update {
       UpdateID: 123
       Message: {Text: "–Ü–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä", Chat: {ID: 456}}
   }
         ‚Üì
7. EventConsumer –ø–µ—Ä–µ–¥–∞—î Update –≤ Processor
         ‚Üì
8. Processor –¥–∏–≤–∏—Ç—å—Å—è:
   - –¶–µ –Ω–µ –∫–æ–º–∞–Ω–¥–∞
   - –ó–Ω–∞—á–∏—Ç—å —Ü–µ –Ω–∞–∑–≤–∞ —Ñ—ñ–ª—å–º—É
   - –¢—Ä–µ–±–∞ –∑–±–µ—Ä–µ–≥—Ç–∏
         ‚Üì
9. Processor –≤–∏–∫–ª–∏–∫–∞—î Storage.AddMovie("–Ü–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä", username)
         ‚Üì
10. Storage —Ä–æ–±–∏—Ç—å SQL –∑–∞–ø–∏—Ç:
    INSERT INTO movies (title, username) VALUES ("–Ü–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä", "vasya")
         ‚Üì
11. Processor –≤–∏–∫–ª–∏–∫–∞—î TelegramClient.SendMessage(456, "–ó–±–µ—Ä–µ–∂–µ–Ω–æ ‚úì")
         ‚Üì
12. TelegramClient —Ä–æ–±–∏—Ç—å HTTP –∑–∞–ø–∏—Ç –¥–æ Telegram
         ‚Üì
13. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å "–ó–±–µ—Ä–µ–∂–µ–Ω–æ ‚úì"

main.go
  ‚Üì —Å—Ç–≤–æ—Ä—é—î
  ‚îú‚îÄ TelegramClient
  ‚îú‚îÄ Storage (SQLite)
  ‚îú‚îÄ Processor (–ø–µ—Ä–µ–¥–∞—î –π–æ–º—É Client —ñ Storage)
  ‚îî‚îÄ EventConsumer (–ø–µ—Ä–µ–¥–∞—î –π–æ–º—É Client —ñ Processor)
     ‚Üì –∑–∞–ø—É—Å–∫–∞—î
     EventConsumer.Start() ‚Üê –±–µ–∑–∫—ñ–Ω–µ—á–Ω–∏–π —Ü–∏–∫–ª
```

### –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```
EventConsumer
  ‚Üì –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î
  ‚îú‚îÄ TelegramClient (—â–æ–± –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ updates)
  ‚îî‚îÄ Processor (—â–æ–± –æ–±—Ä–æ–±–ª—è—Ç–∏ updates)

Processor
  ‚Üì –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î
  ‚îú‚îÄ TelegramClient (—â–æ–± –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è)
  ‚îî‚îÄ Storage (—â–æ–± –∑–±–µ—Ä—ñ–≥–∞—Ç–∏/–¥—ñ—Å—Ç–∞–≤–∞—Ç–∏ —Ñ—ñ–ª—å–º–∏)

TelegramClient
  ‚îî‚îÄ –Ω—ñ–∫–æ–≥–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î (—Ç—ñ–ª—å–∫–∏ http –ø–∞–∫–µ—Ç)

Storage
  ‚îî‚îÄ –Ω—ñ–∫–æ–≥–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î (—Ç—ñ–ª—å–∫–∏ database/sql)